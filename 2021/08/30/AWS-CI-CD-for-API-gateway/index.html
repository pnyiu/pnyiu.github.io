<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>AWS CI/CD for API gateway | Calvin&#39;s Home</title>
  <meta name="author" content="Calvin Yiu">
  
  <meta name="description" content="In this post, I will share how to set up a continuous integration and continuous delivery (CI/CD) pipeline on AWS for API gateway. The following AWS services will be used:

Cloudformation allows you to model your entire infrastructure and application resources
CodePipeline is a continuous delivery service
CodeCommit is a version control service
CodeBuild is a fully managed build service in the cloud
Simple Storage Service (Amazon S3) is storage for the Internet
API Gateway is an AWS service for creating, publishing, maintaining, monitoring, and securing REST, HTTP, and WebSocket APIs
AWS Lambda is a serverless compute service">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="AWS CI/CD for API gateway"/>
  <meta property="og:site_name" content="Calvin&#39;s Home"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/spacelab.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/comment.css" media="screen" type="text/css">

  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  
  <!-- analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-103782633-2', 'auto');
  ga('send', 'pageview');
</script>




<meta name="generator" content="Hexo 5.4.0"></head>

 <body>  
  <nav id="main-nav" class="navbar  navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Calvin&#39;s Home</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header ">		
			<h1 class="title "> AWS CI/CD for API gateway</h1>
		</div>		
	






<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <p>In this post, I will share how to set up a continuous integration and continuous delivery (CI/CD) pipeline on AWS for API gateway. The following AWS services will be used:</p>
<ul>
<li><strong>Cloudformation</strong> allows you to model your entire infrastructure and application resources</li>
<li><strong>CodePipeline</strong> is a continuous delivery service</li>
<li><strong>CodeCommit</strong> is a version control service</li>
<li><strong>CodeBuild</strong> is a fully managed build service in the cloud</li>
<li><strong>Simple Storage Service</strong> (Amazon S3) is storage for the Internet</li>
<li><strong>API Gateway</strong> is an AWS service for creating, publishing, maintaining, monitoring, and securing REST, HTTP, and WebSocket APIs</li>
<li><strong>AWS Lambda</strong> is a serverless compute service</li>
</ul>
<span id="more"></span>

<img src="/images/cicd-api-gateway.png" class="">

<h3 id="Create-CodeCommit-repository"><a href="#Create-CodeCommit-repository" class="headerlink" title="Create CodeCommit repository:"></a>Create CodeCommit repository:</h3><ul>
<li>Login AWS Console</li>
<li>Choose Developer Tools &gt; CodeCommit &gt; Repositories</li>
<li>Click <code>Create repository</code></li>
<li>Enter the repository name as <code>my-api</code> and description (optional)<br>  I refer it as <code>ServiceName</code> in this project</li>
<li>Click <code>Create</code> to create the repository</li>
</ul>
<h3 id="Cloudformation-to-provision-the-CI-CD-pipeline"><a href="#Cloudformation-to-provision-the-CI-CD-pipeline" class="headerlink" title="Cloudformation to provision the CI/CD pipeline"></a>Cloudformation to provision the CI/CD pipeline</h3><h4 id="IAM-Roles"><a href="#IAM-Roles" class="headerlink" title="IAM Roles"></a>IAM Roles</h4><ul>
<li>Role to execute Lambda</li>
<li>Role to run CodeBuild</li>
<li>Role to run CodePipeline</li>
<li>Role that AWS CloudFormation assumes when it operates on resources in the specified stack</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">LambdaRole:</span></span><br><span class="line">    <span class="attr">Type:</span> <span class="string">AWS::IAM::Role</span></span><br><span class="line">    <span class="attr">Properties:</span></span><br><span class="line">    <span class="attr">RoleName:</span> <span class="string">LambdaRole&#x27;</span></span><br><span class="line">    <span class="attr">AssumeRolePolicyDocument:</span></span><br><span class="line">        <span class="attr">Version:</span> <span class="string">&#x27;2012-10-17&#x27;</span></span><br><span class="line">        <span class="attr">Statement:</span></span><br><span class="line">        <span class="attr">Action:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&#x27;sts:AssumeRole&#x27;</span></span><br><span class="line">        <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">        <span class="attr">Principal:</span></span><br><span class="line">            <span class="attr">Service:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">lambda.amazonaws.com</span></span><br><span class="line">    <span class="attr">Path:</span> <span class="string">/</span></span><br><span class="line">    <span class="attr">ManagedPolicyArns:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&#x27;arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole&#x27;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&#x27;arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole&#x27;</span></span><br><span class="line">    <span class="attr">Policies:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">PolicyName:</span> <span class="string">LambdaRoleParameterStorePolicy</span></span><br><span class="line">        <span class="attr">PolicyDocument:</span></span><br><span class="line">            <span class="attr">Version:</span> <span class="string">&#x27;2012-10-17&#x27;</span></span><br><span class="line">            <span class="attr">Statement:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">                <span class="attr">Resource:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:ssm:ap-east-1:$&#123;AWS::AccountId&#125;:parameter/my-api*&#x27;</span></span><br><span class="line">                <span class="attr">Action:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">&#x27;ssm:GetParameters&#x27;</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">&#x27;ssm:GetParameter&#x27;</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">&#x27;ssm:GetParametersByPath&#x27;</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">                <span class="attr">Resource:</span> <span class="string">&#x27;*&#x27;</span></span><br><span class="line">                <span class="attr">Action:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">&#x27;ssm:DescribeParameters&#x27;</span></span><br><span class="line"><span class="attr">CBSrvRole:</span></span><br><span class="line">    <span class="attr">Type:</span> <span class="string">AWS::IAM::Role</span></span><br><span class="line">    <span class="attr">Properties:</span></span><br><span class="line">        <span class="attr">RoleName:</span> <span class="type">!Sub</span> <span class="string">&#x27;$&#123;AWS::StackName&#125;-$&#123;AWS::Region&#125;-CBSrvRole&#x27;</span></span><br><span class="line">        <span class="attr">AssumeRolePolicyDocument:</span></span><br><span class="line">            <span class="attr">Version:</span> <span class="string">&#x27;2012-10-17&#x27;</span></span><br><span class="line">            <span class="attr">Statement:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="attr">Action:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;sts:AssumeRole&#x27;</span></span><br><span class="line">                <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">                <span class="attr">Principal:</span></span><br><span class="line">                    <span class="attr">Service:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">codebuild.amazonaws.com</span></span><br><span class="line">        <span class="attr">Path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">ManagedPolicyArns:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&#x27;arn:aws:iam::aws:policy/AWSCodeCommitFullAccess&#x27;</span></span><br><span class="line">            <span class="bullet">-</span> <span class="type">!Ref</span> <span class="string">CFCPExecPolicy</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&#x27;arn:aws:iam::aws:policy/AdministratorAccess&#x27;</span></span><br><span class="line">        <span class="attr">Policies:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">PolicyName:</span> <span class="string">CodeBuildAccess</span></span><br><span class="line">                <span class="attr">PolicyDocument:</span></span><br><span class="line">                <span class="attr">Version:</span> <span class="string">&#x27;2012-10-17&#x27;</span></span><br><span class="line">                <span class="attr">Statement:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">                    <span class="attr">Resource:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:logs:ap-southeast-1:$&#123;AWS::AccountId&#125;:log-group:/aws/codebuild/*&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:logs:ap-southeast-1:$&#123;AWS::AccountId&#125;:log-group:/aws/codebuild/*:*&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:logs:ap-east-1:$&#123;AWS::AccountId&#125;:log-group:/aws/codebuild/*&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:logs:ap-east-1:$&#123;AWS::AccountId&#125;:log-group:/aws/codebuild/*:*&#x27;</span></span><br><span class="line">                    <span class="attr">Action:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;logs:CreateLogGroup&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;logs:CreateLogStream&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;logs:PutLogEvents&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">                    <span class="attr">Resource:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;*&#x27;</span></span><br><span class="line">                    <span class="attr">Action:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;s3:GetObject&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;s3:GetObjectVersion&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;s3:PutObject&#x27;</span></span><br><span class="line"><span class="attr">CPExecRole:</span></span><br><span class="line">    <span class="attr">Type:</span> <span class="string">AWS::IAM::Role</span></span><br><span class="line">    <span class="attr">Properties:</span></span><br><span class="line">        <span class="attr">RoleName:</span> <span class="string">CPExecRole&#x27;</span></span><br><span class="line">        <span class="attr">AssumeRolePolicyDocument:</span></span><br><span class="line">            <span class="attr">Version:</span> <span class="string">&#x27;2012-10-17&#x27;</span></span><br><span class="line">            <span class="attr">Statement:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">Action:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">&#x27;sts:AssumeRole&#x27;</span></span><br><span class="line">                <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">                <span class="attr">Principal:</span></span><br><span class="line">                <span class="attr">Service:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">codepipeline.amazonaws.com</span></span><br><span class="line">        <span class="attr">Path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">ManagedPolicyArns:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&#x27;arn:aws:iam::aws:policy/AWSCodeCommitFullAccess&#x27;</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&#x27;arn:aws:iam::aws:policy/AmazonS3FullAccess&#x27;</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&#x27;arn:aws:iam::aws:policy/AWSCodeDeployFullAccess&#x27;</span></span><br><span class="line">            <span class="bullet">-</span> <span class="type">!Ref</span> <span class="string">CFCPExecPolicy</span></span><br><span class="line">        <span class="attr">Policies:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">PolicyName:</span> <span class="string">CodePipelineAccess</span></span><br><span class="line">            <span class="attr">PolicyDocument:</span></span><br><span class="line">                <span class="attr">Version:</span> <span class="string">&#x27;2012-10-17&#x27;</span></span><br><span class="line">                <span class="attr">Statement:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Action:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;iam:PassRole&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;lambda:InvokeFunction&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;lambda:ListFunctions&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;lambda:InvokeAsyc&#x27;</span></span><br><span class="line">                    <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">                    <span class="attr">Resource:</span> <span class="string">&#x27;*&#x27;</span></span><br><span class="line"><span class="attr">CFCPExecPolicy:</span></span><br><span class="line">    <span class="attr">Type:</span> <span class="string">AWS::IAM::ManagedPolicy</span></span><br><span class="line">    <span class="attr">Properties:</span></span><br><span class="line">        <span class="attr">Description:</span> <span class="string">CloudFormation</span> <span class="string">Pipeline</span> <span class="string">Execution</span> <span class="string">Policy</span></span><br><span class="line">        <span class="attr">Path:</span> <span class="string">&quot;/&quot;</span></span><br><span class="line">        <span class="attr">PolicyDocument:</span></span><br><span class="line">            <span class="attr">Version:</span> <span class="string">&#x27;2012-10-17&#x27;</span></span><br><span class="line">            <span class="attr">Statement:</span></span><br><span class="line">                <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">                <span class="attr">Action:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:CreateStack&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:DescribeStacks&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:DeleteStack&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:UpdateStack&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:CreateChangeSet&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:ExecuteChangeSet&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:DeleteChangeSet&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:DescribeChangeSet&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:SetStackPolicy&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:SetStackPolicy&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;cloudformation:ValidateTemplate&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;codebuild:StartBuild&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;codebuild:BatchGetBuilds&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;sns:Publish&#x27;</span></span><br><span class="line">                <span class="attr">Resource:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"><span class="attr">CFExecRole:</span></span><br><span class="line">    <span class="attr">Type:</span> <span class="string">AWS::IAM::Role</span></span><br><span class="line">    <span class="attr">Properties:</span></span><br><span class="line">        <span class="attr">RoleName:</span> <span class="string">CFExecRole</span></span><br><span class="line">        <span class="attr">AssumeRolePolicyDocument:</span></span><br><span class="line">        <span class="attr">Version:</span> <span class="string">&#x27;2012-10-17&#x27;</span></span><br><span class="line">        <span class="attr">Statement:</span></span><br><span class="line">            <span class="attr">Action:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&#x27;sts:AssumeRole&#x27;</span></span><br><span class="line">            <span class="attr">Effect:</span> <span class="string">Allow</span></span><br><span class="line">            <span class="attr">Principal:</span></span><br><span class="line">            <span class="attr">Service:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">cloudformation.amazonaws.com</span></span><br><span class="line">        <span class="attr">Path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">ManagedPolicyArns:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">&#x27;arn:aws:iam::aws:policy/AdministratorAccess&#x27;</span></span><br></pre></td></tr></table></figure>


<h3 id="CloudFormation-tempate-to-provision-CI-CD"><a href="#CloudFormation-tempate-to-provision-CI-CD" class="headerlink" title="CloudFormation tempate to provision CI/CD"></a>CloudFormation tempate to provision CI/CD</h3><ol>
<li>Define parameters for using in the template or pass to CodeBuild, and Lambda functions</li>
<li>Define a S3 bucket for build artifacts<ul>
<li>Use as build cache in CodeBuild</li>
<li>Use as Artifacstore in CodePipeline</li>
<li><code>BuildArtifactsBucket</code> is the logical ID of the S3 bucket</li>
</ul>
</li>
<li>CodeBuild project</li>
<li>CodePipeline<ul>
<li>SAM TemplatePath: BuiltZip::template-packaged.yaml</li>
</ul>
</li>
<li>A complete Cloudformation template: <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">AWSTemplateFormatVersion:</span> <span class="number">2010-09-09</span></span><br><span class="line"><span class="attr">Description:</span> <span class="string">CI/CD</span> <span class="string">for</span> <span class="string">my-api</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Parameters:</span></span><br><span class="line">    <span class="attr">ServiceName:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">        <span class="attr">Default:</span> <span class="string">my-api</span></span><br><span class="line">        <span class="attr">Description:</span> <span class="string">CodeCommit</span> <span class="string">repository</span> <span class="string">name</span></span><br><span class="line">    <span class="attr">BuildImageName:</span></span><br><span class="line">        <span class="attr">Description:</span> <span class="string">Docker</span> <span class="string">image</span> <span class="string">for</span> <span class="string">application</span> <span class="string">build</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">        <span class="attr">Default:</span> <span class="string">aws/codebuild/standard:5.0</span></span><br><span class="line">    <span class="attr">BranchName:</span></span><br><span class="line">        <span class="attr">Description:</span> <span class="string">CodeCommit</span> <span class="string">branch</span> <span class="string">to</span> <span class="string">build</span> <span class="string">and</span> <span class="string">deploy</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">        <span class="attr">Default:</span> <span class="string">release/dev</span></span><br><span class="line">    <span class="attr">Env:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">        <span class="attr">Default:</span> <span class="string">uat</span></span><br><span class="line">    <span class="attr">SecurityGroup:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">        <span class="attr">Default:</span> <span class="string">sg-xxxxxxxxxxxxxxx</span></span><br><span class="line">    <span class="attr">Subnet1:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">        <span class="attr">Default:</span> <span class="string">subnet-xxxxxxxxxxxxxxxx</span></span><br><span class="line">    <span class="attr">Subnet2:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">        <span class="attr">Default:</span> <span class="string">subnet-xxxxxxxxxxxxxxxxx</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Resources:</span></span><br><span class="line">    <span class="attr">BuildArtifactsBucket:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">AWS::S3::Bucket</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">CodeBuildProject:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">AWS::CodeBuild::Project</span></span><br><span class="line">        <span class="attr">Properties:</span></span><br><span class="line">            <span class="attr">Description:</span></span><br><span class="line">                <span class="type">!Join</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;Build project for the $&#123;ServiceName&#125;&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27; (&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="type">!Ref</span> <span class="string">AWS::StackName</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;)&#x27;</span></span><br><span class="line">            <span class="attr">Artifacts:</span></span><br><span class="line">                <span class="attr">Type:</span> <span class="string">CODEPIPELINE</span></span><br><span class="line">            <span class="attr">Cache:</span></span><br><span class="line">                <span class="attr">Location:</span></span><br><span class="line">                    <span class="type">!Join</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">&#x27;/&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="bullet">-</span> <span class="type">!Ref</span> <span class="string">BuildArtifactsBucket</span></span><br><span class="line">                            <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;$&#123;ServiceName&#125;_cache&#x27;</span></span><br><span class="line">                <span class="attr">Type:</span> <span class="string">S3</span></span><br><span class="line">            <span class="attr">Environment:</span></span><br><span class="line">                <span class="attr">Type:</span> <span class="string">LINUX_CONTAINER</span></span><br><span class="line">                <span class="attr">ComputeType:</span> <span class="string">BUILD_GENERAL1_SMALL</span></span><br><span class="line">                <span class="attr">Image:</span> <span class="type">!Sub</span> <span class="string">$&#123;BuildImageName&#125;</span></span><br><span class="line">                <span class="attr">EnvironmentVariables:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">ENV</span></span><br><span class="line">                        <span class="attr">Value:</span> <span class="type">!Ref</span> <span class="string">Env</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">SecurityGroup</span></span><br><span class="line">                        <span class="attr">Value:</span> <span class="type">!Ref</span> <span class="string">SecurityGroup</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">Subnet1</span></span><br><span class="line">                        <span class="attr">Value:</span> <span class="type">!Ref</span> <span class="string">Subnet1</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">Subnet2</span></span><br><span class="line">                        <span class="attr">Value:</span> <span class="type">!Ref</span> <span class="string">Subnet2</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">LambdaRole</span></span><br><span class="line">                        <span class="attr">Value:</span> <span class="string">LambdaRole</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">SourceVpc</span></span><br><span class="line">                        <span class="attr">Value:</span> <span class="type">!Ref</span> <span class="string">SourceVpc</span></span><br><span class="line">            <span class="attr">ServiceRole:</span></span><br><span class="line">                <span class="type">!Join</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:iam::$&#123;AWS::AccountId&#125;:role/&#x27;</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="string">CBSrvRole</span></span><br><span class="line">            <span class="attr">Source:</span></span><br><span class="line">                <span class="attr">Type:</span> <span class="string">CODEPIPELINE</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">Pipeline:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">AWS::CodePipeline::Pipeline</span></span><br><span class="line">        <span class="attr">Properties:</span></span><br><span class="line">            <span class="attr">ArtifactStore:</span></span><br><span class="line">                <span class="attr">Location:</span> <span class="type">!Ref</span> <span class="string">BuildArtifactsBucket</span></span><br><span class="line">                <span class="attr">Type:</span> <span class="string">S3</span></span><br><span class="line">            <span class="attr">RoleArn:</span></span><br><span class="line">                <span class="type">!Join</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:iam::$&#123;AWS::AccountId&#125;:role/&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">CPExecRole</span></span><br><span class="line">            <span class="attr">Stages:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">Source</span></span><br><span class="line">                <span class="attr">Actions:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">CodeCommitRepo</span></span><br><span class="line">                    <span class="attr">ActionTypeId:</span></span><br><span class="line">                        <span class="attr">Category:</span> <span class="string">Source</span></span><br><span class="line">                        <span class="attr">Owner:</span> <span class="string">AWS</span></span><br><span class="line">                        <span class="attr">Provider:</span> <span class="string">CodeCommit</span></span><br><span class="line">                        <span class="attr">Version:</span> <span class="number">1</span></span><br><span class="line">                    <span class="attr">Configuration:</span></span><br><span class="line">                        <span class="attr">RepositoryName:</span> <span class="type">!Sub</span> <span class="string">$&#123;ServiceName&#125;</span></span><br><span class="line">                        <span class="attr">BranchName:</span> <span class="type">!Sub</span> <span class="string">$&#123;BranchName&#125;</span></span><br><span class="line">                    <span class="attr">OutputArtifacts:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">SourceZip</span></span><br><span class="line">                    <span class="attr">RunOrder:</span> <span class="number">1</span></span><br><span class="line">                <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">Build</span></span><br><span class="line">                <span class="attr">Actions:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">CodeBuild</span></span><br><span class="line">                    <span class="attr">ActionTypeId:</span></span><br><span class="line">                        <span class="attr">Category:</span> <span class="string">Build</span></span><br><span class="line">                        <span class="attr">Owner:</span> <span class="string">AWS</span></span><br><span class="line">                        <span class="attr">Provider:</span> <span class="string">CodeBuild</span></span><br><span class="line">                        <span class="attr">Version:</span> <span class="number">1</span></span><br><span class="line">                    <span class="attr">Configuration:</span></span><br><span class="line">                        <span class="attr">ProjectName:</span> <span class="type">!Ref</span> <span class="string">CodeBuildProject</span></span><br><span class="line">                    <span class="attr">InputArtifacts:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">SourceZip</span></span><br><span class="line">                    <span class="attr">OutputArtifacts:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">BuiltZip</span></span><br><span class="line">                <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">Deploy</span></span><br><span class="line">                <span class="attr">Actions:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">CreateChangeSetPublicAPI</span></span><br><span class="line">                    <span class="attr">ActionTypeId:</span></span><br><span class="line">                        <span class="attr">Category:</span> <span class="string">Deploy</span></span><br><span class="line">                        <span class="attr">Owner:</span> <span class="string">AWS</span></span><br><span class="line">                        <span class="attr">Provider:</span> <span class="string">CloudFormation</span></span><br><span class="line">                        <span class="attr">Version:</span> <span class="number">1</span></span><br><span class="line">                    <span class="attr">Configuration:</span></span><br><span class="line">                        <span class="attr">ActionMode:</span> <span class="string">CHANGE_SET_REPLACE</span></span><br><span class="line">                        <span class="attr">RoleArn:</span></span><br><span class="line">                            <span class="type">!Join</span></span><br><span class="line">                                <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">                                <span class="bullet">-</span> <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:iam::$&#123;AWS::AccountId&#125;:role/&#x27;</span></span><br><span class="line">                                <span class="bullet">-</span> <span class="string">CFExecRole</span></span><br><span class="line">                        <span class="attr">StackName:</span> <span class="type">!Sub</span> <span class="string">&#x27;$&#123;ServiceName&#125;-stack-$&#123;Env&#125;&#x27;</span></span><br><span class="line">                        <span class="attr">ChangeSetName:</span> <span class="type">!Sub</span> <span class="string">&#x27;$&#123;ServiceName&#125;-changeset-$&#123;Env&#125;&#x27;</span></span><br><span class="line">                        <span class="attr">TemplatePath:</span> <span class="string">BuiltZip::template-packaged.yaml</span></span><br><span class="line">                        <span class="attr">ParameterOverrides:</span> <span class="type">!Sub</span> <span class="string">&#x27;&#123; &quot;Env&quot;: &quot;$&#123;Env&#125;&quot;, &quot;SecurityGroup&quot;: &quot;$&#123;SecurityGroup&#125;&quot;, &quot;Subnet1&quot;: &quot;$&#123;Subnet1&#125;&quot;, &quot;Subnet2&quot;: &quot;$&#123;Subnet2&#125;&quot;&#125;&#x27;</span></span><br><span class="line">                    <span class="attr">InputArtifacts:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">BuiltZip</span></span><br><span class="line">                    <span class="attr">RunOrder:</span> <span class="number">1</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="attr">Name:</span> <span class="string">ExecuteChangeSetPublicAPI</span></span><br><span class="line">                    <span class="attr">ActionTypeId:</span></span><br><span class="line">                        <span class="attr">Category:</span> <span class="string">Deploy</span></span><br><span class="line">                        <span class="attr">Owner:</span> <span class="string">AWS</span></span><br><span class="line">                        <span class="attr">Provider:</span> <span class="string">CloudFormation</span></span><br><span class="line">                        <span class="attr">Version:</span> <span class="number">1</span></span><br><span class="line">                    <span class="attr">Configuration:</span></span><br><span class="line">                        <span class="attr">ActionMode:</span> <span class="string">CHANGE_SET_EXECUTE</span></span><br><span class="line">                        <span class="attr">RoleArn:</span></span><br><span class="line">                            <span class="type">!Join</span></span><br><span class="line">                                <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">                                <span class="bullet">-</span> <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:iam::$&#123;AWS::AccountId&#125;:role/&#x27;</span></span><br><span class="line">                                <span class="bullet">-</span> <span class="string">CFExecRole</span></span><br><span class="line">                        <span class="attr">StackName:</span> <span class="type">!Sub</span> <span class="string">&#x27;$&#123;ServiceName&#125;-stack-$&#123;Env&#125;&#x27;</span></span><br><span class="line">                        <span class="attr">ChangeSetName:</span> <span class="type">!Sub</span> <span class="string">&#x27;$&#123;ServiceName&#125;-changeset-$&#123;Env&#125;&#x27;</span></span><br><span class="line">                    <span class="attr">OutputArtifacts:</span></span><br><span class="line">                        <span class="bullet">-</span> <span class="attr">Name:</span> <span class="type">!Sub</span> <span class="string">&#x27;$&#123;ServiceName&#125;$&#123;Env&#125;ChangeSet&#x27;</span></span><br><span class="line">                    <span class="attr">RunOrder:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="API-Project-Sample-Source-Code"><a href="#API-Project-Sample-Source-Code" class="headerlink" title="API Project Sample Source Code"></a>API Project Sample Source Code</h3><ul>
<li><p>Create S3 bucket to store the .zip for each function (e.g. <code>api-ap-east-1-build-stack-uat</code>)</p>
</li>
<li><p>Now, you can develop your own API in <strong>Node.js</strong>:</p>
  <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">├── api-test</span><br><span class="line">│   ├── app.js</span><br><span class="line">│   ├── node_modules</span><br><span class="line">│   ├── package.json</span><br><span class="line">│   └── package-lock.json</span><br><span class="line">├── buildspec.yaml</span><br><span class="line">└── template.yaml</span><br></pre></td></tr></table></figure>

<ul>
<li>buildspec.yaml<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="number">0.2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">phases:</span></span><br><span class="line"><span class="attr">pre_build:</span></span><br><span class="line">    <span class="attr">commands:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">n</span> <span class="number">14.17</span><span class="number">.3</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cd</span> <span class="string">api-test</span> <span class="string">&amp;&amp;</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;dependencies install for api-test completed `date`&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cd</span> <span class="string">../.</span></span><br><span class="line"><span class="attr">build:</span></span><br><span class="line">    <span class="attr">commands:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">echo</span> <span class="string">&quot;Starting build `date` in `pwd`&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">aws</span> <span class="string">cloudformation</span> <span class="string">package</span> <span class="string">--template-file</span> <span class="string">template.yaml</span> <span class="string">\</span></span><br><span class="line">    <span class="string">--output-template-file</span> <span class="string">template-packaged.yaml--s3-prefix</span> <span class="string">api-package</span> <span class="string">\</span></span><br><span class="line">    <span class="string">--s3-bucket</span> <span class="string">api-ap-east-1-build-stack-$&#123;ENV&#125;</span> <span class="string">--region</span> <span class="string">ap-east-1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">artifacts:</span></span><br><span class="line"><span class="attr">files:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">template-packaged.yaml</span></span><br><span class="line"><span class="attr">discard-paths:</span> <span class="literal">yes</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<ul>
<li>template.yaml</li>
</ul>
</li>
<li>template.yaml<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">Transform:</span> <span class="string">AWS::Serverless-2016-10-31</span></span><br><span class="line"><span class="attr">Description:</span> <span class="string">API</span> <span class="string">SAM</span> <span class="string">template</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># More info about Globals: https://github.com/awslabs/serverless-application-model/blob/master/docs/globals.rst</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Don&#x27;t change anything</span></span><br><span class="line"><span class="attr">Globals:</span></span><br><span class="line">    <span class="attr">Function:</span></span><br><span class="line">        <span class="attr">Runtime:</span> <span class="string">nodejs14.x</span></span><br><span class="line">        <span class="attr">Handler:</span> <span class="string">app.lambdaHandler</span></span><br><span class="line">        <span class="attr">Timeout:</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Don&#x27;t change anything</span></span><br><span class="line"><span class="attr">Parameters:</span></span><br><span class="line">    <span class="attr">Env:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">        <span class="attr">AllowedValues:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">uat</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">preprod</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">prod</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">test</span></span><br><span class="line">        <span class="attr">Default:</span> <span class="string">uat</span></span><br><span class="line">    <span class="attr">SecurityGroup:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">    <span class="attr">Subnet1:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">    <span class="attr">Subnet2:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">    <span class="attr">LambdaRole:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">String</span></span><br><span class="line">        <span class="attr">Default:</span> <span class="string">LambdaRole</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Resources:</span></span><br><span class="line">    <span class="attr">SampleFunction:</span></span><br><span class="line">        <span class="attr">Type:</span> <span class="string">AWS::Serverless::Function</span></span><br><span class="line">        <span class="attr">Properties:</span></span><br><span class="line">            <span class="attr">Timeout:</span> <span class="number">15</span></span><br><span class="line">            <span class="attr">Handler:</span> <span class="string">app.handler</span></span><br><span class="line">            <span class="attr">Layers:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:lambda:$&#123;AWS::Region&#125;:$&#123;AWS::AccountId&#125;:layer:oracle-linux-client-layer:1&#x27;</span></span><br><span class="line">            <span class="attr">CodeUri:</span> <span class="string">api-test/</span></span><br><span class="line">            <span class="attr">Role:</span></span><br><span class="line">                <span class="type">!Join</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">&#x27;arn:aws:iam::$&#123;AWS::AccountId&#125;:role/&#x27;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">$&#123;LambdaRole&#125;</span></span><br><span class="line">            <span class="attr">Events:</span></span><br><span class="line">                <span class="attr">SampleFunction:</span></span><br><span class="line">                    <span class="attr">Type:</span> <span class="string">Api</span></span><br><span class="line">                    <span class="attr">Properties:</span></span><br><span class="line">                        <span class="attr">Path:</span> <span class="string">/api-test</span></span><br><span class="line">                        <span class="attr">Method:</span> <span class="string">get</span></span><br><span class="line">            <span class="attr">Environment:</span></span><br><span class="line">                <span class="attr">Variables:</span></span><br><span class="line">                    <span class="attr">Env:</span> <span class="type">!Sub</span> <span class="string">$&#123;Env&#125;</span></span><br><span class="line">            <span class="attr">VpcConfig:</span></span><br><span class="line">                <span class="attr">SecurityGroupIds:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">$&#123;SecurityGroup&#125;</span></span><br><span class="line">                <span class="attr">SubnetIds:</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">$&#123;Subnet1&#125;</span></span><br><span class="line">                    <span class="bullet">-</span> <span class="type">!Sub</span> <span class="string">$&#123;Subnet2&#125;</span></span><br><span class="line"><span class="attr">Outputs:</span></span><br><span class="line">    <span class="attr">SampleFunction:</span></span><br><span class="line">        <span class="attr">Description:</span> <span class="string">&quot;A sample function&quot;</span></span><br><span class="line">        <span class="attr">Value:</span> <span class="type">!Sub</span> <span class="string">&quot;https://$&#123;ServerlessRestApi&#125;.execute-api.$&#123;AWS::Region&#125;.amazonaws.com/Prod/api-test&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Push the code to CodeCommit</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin release/dev</span><br></pre></td></tr></table></figure></li>
<li><p>The Pipeline will be executed to:</p>
<ul>
<li>Download the source code</li>
<li>Build the source code</li>
<li>Prepare the SAM template file</li>
<li>Deploy the API gateway</li>
</ul>
</li>
</ul>
<h3 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h3><ul>
<li>Returns the ID and status of each active change set for a stack.<ul>
<li>Use AWS CLI<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">$</span> <span class="string">aws</span> <span class="string">cloudformation</span> <span class="string">list-change-sets</span> <span class="string">--stack-name</span> <span class="string">stack-name</span> <span class="string">--profile</span> <span class="string">xxx</span> <span class="string">--region</span> <span class="string">ap-east-1</span></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;Summaries&quot;:</span> [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;StackId&quot;:</span> <span class="string">&quot;arn:aws:cloudformation:ap-east-1:account-id:stack/stack-name/d353b870-0a30-11ec-b48b-0e7bb5a4c8fc&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;Status&quot;:</span> <span class="string">&quot;FAILED&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ChangeSetName&quot;:</span> <span class="string">&quot;change-set-name&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;CreationTime&quot;:</span> <span class="string">&quot;2021-09-02T01:58:11.556Z&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;StatusReason&quot;:</span> <span class="string">&quot;Transform AWS::Serverless-2016-10-31 failed with: Invalid Serverless Application Specification document. Number of errors found: 1. Resource with id [SampleFunction] is invalid. Type of property &#x27;Events&#x27; is invalid.&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;StackName&quot;:</span> <span class="string">&quot;stack-name&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ExecutionStatus&quot;:</span> <span class="string">&quot;UNAVAILABLE&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ChangeSetId&quot;:</span> <span class="string">&quot;arn:aws:cloudformation:ap-east-1:account-id:changeSet/change-set-name/xxxxxxx&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Use AWS Console<img src="/images/2021-09-02%2010_53_39-CloudFormation.png" class=""></li>
</ul>
</li>
</ul>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2021/09/06/AWS-API-Gateway-notes/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2021/08/17/Create-AWS-Lamdba-Layer/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>

    <!-- share -->
    
        

        

    
	
	<!-- comment -->
	

	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2021-08-30 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/AWS/">AWS<span>4</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/AWS/">AWS<span>5</span></a></li>
    </ul>
	</div>
	

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2021 Calvin Yiu
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p>

 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




<!-- syntax highlighting -->


</body>
   </html>
